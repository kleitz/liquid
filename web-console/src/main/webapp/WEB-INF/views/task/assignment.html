<!DOCTYPE html>
<html>

<head th:replace="layout :: head" />

<body>

<!-- {!begin layout} -->
<div th:include="layout :: header"></div>
<!-- {!end layout} -->

<div class="container">
    <div th:include="layout :: alert" />

    <table class="table table-striped table-hover table-condensed table-16"
           sth:unless="${#lists.isEmpty(tasks)}">
        <thead>
        <tr>
            <th th:text="#{task.id}">Task ID</th>
            <th th:text="#{task.name}">Task Name</th>
            <th th:text="#{order.no}">Order No</th>
            <th th:text="#{task.description}">Task Description</th>
            <th th:text="#{task.create.time}">Task Cteate Date</th>
            <th th:text="#{task.owner}">Task Owner</th>
            <th></th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="task : ${tasks}">
            <form th:id="${task.id}" th:action="'/task/' + ${task.id}" method="POST">
            <td>
                <a th:href="'/task/' + ${task.id}" th:text="${task.id}">Task ID</a>
            </td>
            <td th:text="${task.name}">Task Name</td>
            <td>
                <a target="_blank" th:href="'/order/' + ${task.orderId}" th:text="${task.orderNo}">Order No</a>
            </td>
            <td th:text="${task.description}">Task Description</td>
            <td th:text="${task.createDate}">Task Create Date</td>                    
            <td>
               <select id="username" name="username" class="form-control input-sm">
                   <option th:each="userProfile: ${task.candidateUserList}"
                           th:value="${userProfile.username}"
                           th:text="${userProfile.lastName} + ${userProfile.firstName}"
                           th:selected="${task.assignee} == ${username}">
                   </option>
               </select>
            </td>
            <td><button type="submit" name="assign" class="btn btn-sm btn-success" th:form="${task.id}"><span th:text="#{task.assign}">Assign</span></button></td>
            </form>
        </tr>
        </tbody>
    </table>
</div>
<!-- /.container -->

<!-- {!begin layout} -->
<div th:include="layout :: footer"></div>
<!-- {!end layout} -->

<!-- {!begin layout} -->
<div th:replace="layout :: js" />
<!-- {!end layout} -->
</body>
</html>
